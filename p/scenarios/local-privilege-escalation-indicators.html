<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Active Directory Kerberoasting — EchoPurple</title>
<meta name="description" content="Active Directory Kerberoasting attack and detection engineering case study. Full attacker and defender perspectives with evidence screenshots." />

<style>
:root{
  --bg0:#07040d;
  --bg1:#0b0614;
  --bg2:#100a1e;
  --stroke:rgba(255,255,255,0.10);
  --stroke2:rgba(255,255,255,0.14);
  --text:#f5f1ff;
  --muted:rgba(245,241,255,0.72);
  --p1:#6d28d9;
  --p2:#a855f7;
  --p3:#22d3ee;
  --radius:18px;
  --header-h:98px;
  --shadow:0 18px 60px rgba(0,0,0,0.55);
  --shadow-soft:0 10px 30px rgba(0,0,0,0.35);
}

*{box-sizing:border-box;margin:0;padding:0;word-wrap:break-word}
img{max-width:100%;height:auto}

body{
  font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto;
  color:var(--text);
  min-height:100vh;
  display:flex;
  flex-direction:column;
  background:
    radial-gradient(900px 520px at 16% -10%, rgba(168,85,247,0.24), transparent 60%),
    radial-gradient(860px 520px at 88% 0%, rgba(34,211,238,0.14), transparent 55%),
    radial-gradient(900px 700px at 50% 110%, rgba(109,40,217,0.18), transparent 60%),
    linear-gradient(180deg,var(--bg0),var(--bg1) 30%, var(--bg2));
}

header{
  position:fixed;top:0;left:0;right:0;z-index:1000;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 40px;
  min-height:var(--header-h);
  background:linear-gradient(90deg, rgba(109,40,217,0.95), rgba(168,85,247,0.90) 45%, rgba(34,211,238,0.25));
  border-bottom:1px solid rgba(255,255,255,0.12);
  box-shadow:0 12px 40px rgba(0,0,0,0.55);
}

.brand{display:flex;gap:16px;align-items:center}
.logo{height:calc(var(--header-h) - 10px)}
.logo img{height:100%;object-fit:contain;filter:drop-shadow(0 10px 16px rgba(0,0,0,0.35))}

nav{display:flex;gap:16px}
.btn{
  background:transparent;border:none;color:#fff;text-decoration:none;
  font-size:14px;font-weight:700;opacity:.9;
}
.btn:hover{opacity:1}

.btn-solid{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.14);
  font-weight:900;
  font-size:13px;
  color:#fff;
  background:linear-gradient(135deg, rgba(109,40,217,0.95), rgba(168,85,247,0.78));
  cursor:pointer;
}

main{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:18px;
  padding:calc(var(--header-h) + 16px) 40px 32px;
}

.section{
  background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  border-radius:var(--radius);
  padding:24px;
  box-shadow:var(--shadow-soft);
  border:1px solid var(--stroke);
}

.hero{
  display:grid;
  grid-template-columns:1.25fr .75fr;
  gap:14px;
}

.card{
  background:linear-gradient(180deg, rgba(0,0,0,0.20), rgba(0,0,0,0.10));
  border:1px solid rgba(255,255,255,0.10);
  border-radius:14px;
  padding:16px;
}

h1{font-size:28px;margin-bottom:8px}
h2{font-size:18px;margin-bottom:10px}
h3{font-size:15px;margin-bottom:8px}
p{color:var(--muted)}
ul{margin-top:10px;padding-left:18px;color:var(--muted)}
li{margin:6px 0}

.grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}

figure{
  border-radius:14px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.10);
  background:rgba(0,0,0,0.18);
  cursor:zoom-in;
}
figure img{display:block;width:100%}
figcaption{
  padding:10px 12px;
  font-size:12px;
  background:rgba(0,0,0,0.25);
}

footer{
  text-align:center;
  padding:22px;
  background:linear-gradient(90deg, rgba(109,40,217,0.95), rgba(168,85,247,0.88) 45%, rgba(34,211,238,0.20));
}

/* LIGHTBOX */
.lightbox{
  position:fixed;inset:0;z-index:2000;
  display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,0.75);
}
.lightbox.open{display:flex}
.lightbox img{
  max-width:95vw;
  max-height:90vh;
}
@media(max-width:900px){
  .hero{grid-template-columns:1fr}
  .grid3{grid-template-columns:1fr}
}
</style>
</head>

<body>

<header>
  <div class="brand">
    <div class="logo">
      <img src="../../Logo/Portfolio_Logo.png.png" alt="Logo">
    </div>
  </div>

  <nav>
    <a class="btn" href="../../projects.html">← Projects</a>
    <a class="btn" href="../../index.html">Home</a>
  </nav>

  <button class="btn-solid" id="toggleView">Switch to Defender View</button>
</header>

<main>

<section class="section hero">
  <div class="card">
    <h1 id="pageTitle">Active Directory Kerberoasting — Attacker Perspective</h1>
    <p id="pageIntro">
      Authenticated domain user abused Kerberos service ticket requests to extract TGS hashes
      for offline cracking via Impacket and Hashcat.
    </p>

    <h2 style="margin-top:14px">Execution Flow</h2>
    <ul id="flowList">
      <li>Enumerated SPN-enabled accounts (GetUserSPNs).</li>
      <li>Requested TGS tickets using -request flag.</li>
      <li>Extracted RC4 (etype 23) service ticket hash.</li>
      <li>Cracked password offline (hashcat mode 13100).</li>
    </ul>

    <div style="margin-top:16px;">
      <a class="btn-solid" href="../../viewer.html?src=Projects/active-directory-kerberoasting/README.md">Project README</a>
      <a class="btn-solid" href="../../viewer.html?src=Projects/active-directory-kerberoasting/attack/01-enumeration.md">Attack Steps</a>
      <a class="btn-solid" href="../../viewer.html?src=Projects/active-directory-kerberoasting/detection/03-detection-logic.md">Detection Logic</a>
    </div>
  </div>

  <div class="card">
    <h2>Project Snapshot</h2>
    <ul>
      <li><strong>Domain:</strong> LAB.LOCAL</li>
      <li><strong>Tooling:</strong> Impacket, Hashcat</li>
      <li><strong>Primary Event:</strong> 4769</li>
      <li><strong>Encryption Indicator:</strong> RC4 (0x17)</li>
      <li><strong>Correlation:</strong> 4624 → 4768 → 4769</li>
    </ul>
  </div>
</section>

<section class="section">
  <h2 id="analysisTitle">Technical Breakdown (Attacker)</h2>
  <ul id="analysisList">
    <li>Kerberos allows any authenticated user to request service tickets.</li>
    <li>TGS encrypted with service account NTLM hash.</li>
    <li>Weak passwords enable offline cracking.</li>
    <li>No exploit required — protocol abuse.</li>
  </ul>
</section>

<section class="section">
  <h2 id="evidenceTitle">Attacker Evidence</h2>

  <div class="grid3 attacker-view">
    <figure data-zoom>
      <img src="../../Projects/active-directory-kerberoasting/screenshots/attack/attack-01.png">
      <figcaption>SPN Enumeration via GetUserSPNs.</figcaption>
    </figure>

    <figure data-zoom>
      <img src="../../Projects/active-directory-kerberoasting/screenshots/attack/attack-02.png">
      <figcaption>TGS Request (-request flag).</figcaption>
    </figure>

    <figure data-zoom>
      <img src="../../Projects/active-directory-kerberoasting/screenshots/attack/attack-03.png">
      <figcaption>Hashcat cracking result (mode 13100).</figcaption>
    </figure>
  </div>

  <div class="grid3 defender-view" style="display:none;">
    <figure data-zoom>
      <img src="../../Projects/active-directory-kerberoasting/screenshots/detection/detection-4769.png">
      <figcaption>Event 4769 — Service Ticket Request.</figcaption>
    </figure>

    <figure data-zoom>
      <img src="../../Projects/active-directory-kerberoasting/screenshots/detection/detection-rc4.png">
      <figcaption>TicketEncryptionType 0x17 (RC4).</figcaption>
    </figure>

    <figure data-zoom>
      <img src="../../Projects/active-directory-kerberoasting/screenshots/detection/detection-correlation.png">
      <figcaption>Correlation: 4624 → 4768 → 4769 burst.</figcaption>
    </figure>
  </div>
</section>

</main>

<footer>
© Bobo Nikolov — EchoPurple
</footer>

<div class="lightbox" id="lightbox">
  <img id="lightboxImg">
</div>

<script>
const toggleBtn = document.getElementById("toggleView");
const attackerView = document.querySelector(".attacker-view");
const defenderView = document.querySelector(".defender-view");
const pageTitle = document.getElementById("pageTitle");
const pageIntro = document.getElementById("pageIntro");
const flowList = document.getElementById("flowList");
const analysisTitle = document.getElementById("analysisTitle");
const analysisList = document.getElementById("analysisList");
const evidenceTitle = document.getElementById("evidenceTitle");

let attackerMode = true;

toggleBtn.addEventListener("click", ()=>{
  attackerMode = !attackerMode;

  if(!attackerMode){
    attackerView.style.display="none";
    defenderView.style.display="grid";

    pageTitle.textContent="Active Directory Kerberoasting — Defender Perspective";
    pageIntro.textContent="Detection engineering analysis of Kerberos service ticket abuse using Windows Security telemetry.";

    flowList.innerHTML=`
      <li>Collected 4769 events from Domain Controller.</li>
      <li>Filtered TicketEncryptionType = 0x17.</li>
      <li>Identified abnormal SPN request volume.</li>
      <li>Correlated 4624 → 4768 → 4769 chain.</li>
    `;

    analysisTitle.textContent="Detection Logic (Defender)";
    analysisList.innerHTML=`
      <li>Primary signal: 4769 + RC4 encryption.</li>
      <li>Volume anomaly per user/IP.</li>
      <li>Exclude krbtgt requests.</li>
      <li>Correlate Logon ID for accuracy.</li>
    `;

    evidenceTitle.textContent="Defender Evidence";
    toggleBtn.textContent="Switch to Attacker View";

  } else {
    attackerView.style.display="grid";
    defenderView.style.display="none";

    pageTitle.textContent="Active Directory Kerberoasting — Attacker Perspective";
    pageIntro.textContent="Authenticated domain user abused Kerberos service ticket requests to extract TGS hashes for offline cracking.";

    flowList.innerHTML=`
      <li>Enumerated SPN-enabled accounts (GetUserSPNs).</li>
      <li>Requested TGS tickets.</li>
      <li>Extracted RC4 hash.</li>
      <li>Cracked offline with hashcat.</li>
    `;

    analysisTitle.textContent="Technical Breakdown (Attacker)";
    analysisList.innerHTML=`
      <li>Kerberos TGS encrypted with service NTLM hash.</li>
      <li>Offline cracking avoids live brute detection.</li>
      <li>No exploit required.</li>
      <li>Weak service passwords enable compromise.</li>
    `;

    evidenceTitle.textContent="Attacker Evidence";
    toggleBtn.textContent="Switch to Defender View";
  }
});

/* LIGHTBOX */
const lb=document.getElementById("lightbox");
const lbImg=document.getElementById("lightboxImg");

document.querySelectorAll("figure[data-zoom]").forEach(fig=>{
  const img=fig.querySelector("img");
  img.addEventListener("click",()=>{
    lbImg.src=img.src;
    lb.classList.add("open");
  });
});

lb.addEventListener("click",()=>lb.classList.remove("open"));
document.addEventListener("keydown",e=>{
  if(e.key==="Escape") lb.classList.remove("open");
});
</script>

</body>
</html>
